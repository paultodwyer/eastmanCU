<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Sephora</title>
    <style>
      body {
        padding: 0;
        margin: 0;
      }
      iframe[id^="sb__open-sandbox"] {
        display: none !important;
      }
      #external-webpage {
        height: 100vh !important;
      }

      #tdWebchat .triggerButtonContainer_2T9qk {
        bottom: 50px !important;
        right: 38px !important;
      }
    </style>

    <style>
      /*Custom theme for Schneider*/
      .headerSubTitle_1C-p5 {
        color: #353538 !important;
      }

      .headerWrapper_1xhLe {
        background-color: #1fb14f !important;
      }

      .iqQOmY,
      .fUArHy {
        background-color: #1fb14f !important;
      }

      .fUArHy {
        color: white !important;
      }
    </style>
  </head>
  <body>
    <img class="background" src="sephora.png" />

    <!-- Start of Talkdesk Code -->
    <script>
      var webchat;
      ((window, document, node, props, configs) => {
        if (window.TalkdeskChatSDK) {
          console.error("TalkdeskChatSDK already included");
          return;
        }
        var divContainer = document.createElement("div");
        divContainer.id = node;
        document.body.appendChild(divContainer);
        var src = `https://talkdeskchatsdk.talkdeskapp.com/talkdeskchatsdk.js?t=${new Date().getTime()}`;
        var script = document.createElement("script");
        var firstScriptTag = document.getElementsByTagName("script")[0];
        script.type = "text/javascript";
        script.id = "tdwebchatscript";
        script.src = src;
        script.async = true;
        firstScriptTag.parentNode.insertBefore(script, firstScriptTag);
        script.onload = () => {
          webchat = TalkdeskChatSDK(node, props);
          webchat.init(configs).then(() => {
            document
              .querySelector('[data-qa="trigger-button"')
              .addEventListener("click", () => {
                var opened = JSON.parse(localStorage.getItem("webchatConfig"))
                  ?.wasChatOpened;
                if (opened) {
                  return;
                }
                setTimeout(function () {
                  webchat.selfHostedApp.addUserMessage({
                    data: "welcome",
                    type: "postback"
                  });
                }, 100);
              });
          });
        };
      })(
        window,
        document,
        "tdWebchat",
        { flowId: "826a4f5839124bb4915bf63ef30f8624", accountId: "" },
        { enableEmoji: true, enableUserInput: true }
      );
    </script>
    <!-- End of Talkdesk Code -->
  </body>
</html>
